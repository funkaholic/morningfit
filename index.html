<!-- 로컬 테스트: VSCode Live Server 또는 `npx serve`로 정적 서버를 실행한 뒤 http://localhost:3000 에 접속하세요. -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MorningFit | 모닝핏</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/svg+xml" href="assets/morningfit-logo.svg" />
  </head>
  <body>
    <div id="toast" class="toast" aria-live="polite"></div>
    <div class="app-shell">
      <header class="hero drop-in">
        <div class="hero-top">
          <div class="brand">
            <img
              src="assets/morningfit_logo.png"
              alt="모닝핏 로고"
              class="brand-logo"
            />
            <div class="brand-text">
              <p class="brand-sub">캡슐 등원룩 큐레이터</p>
            </div>
          </div>
          <div class="hero-actions">
            <button id="ootdGalleryBtn" class="ghost-btn">OOTD 갤러리</button>
            <p class="today-date" id="todayDate">--</p>
            <div class="location-pill">
              <span class="material-icon">📌</span>
              <span id="currentLocation">위치 확인 중...</span>
            </div>
          </div>
        </div>
        <div class="location-search" id="locationSearch">
          <input
            type="text"
            id="locationInput"
            placeholder="예: 성남시 분당구 정자동"
          />
          <button
            id="locationSearchTrigger"
            class="icon-btn search-btn"
            aria-label="위치 검색"
          >
            🔍
          </button>
        </div>
        <div class="weather-bar" id="weatherBar">
          <div class="temp">
            <span id="weatherIcon" class="weather-icon">🌤️</span>
            <div>
              <p id="tempNow">--°</p>
              <small id="feelsLike">체감 --°</small>
            </div>
          </div>
          <div class="weather-badges" id="weatherBadges"></div>
        </div>
      </header>

      <main>
        <section class="panel profile-panel fade-in">
          <div class="avatar-block">
            <div class="avatar" id="avatarPreview" aria-label="프로필 사진">
              <span id="avatarInitial">유</span>
            </div>
            <input type="file" id="avatarInput" accept="image/*" hidden />
            <button id="avatarTrigger" class="ghost-btn small">
              프로필 사진 변경
            </button>
            <button id="profileEditBtn" class="ghost-btn tiny">
              프로필 편집 (추후)
            </button>
          </div>
          <div class="profile-info">
            <div class="profile-row">
              <h2 id="childName">유진</h2>
              <div id="genderBadge" class="gender-badge" aria-label="성별">♀</div>
            </div>
            <p class="profile-meta">
              <span id="childAge">2세</span> ·
              <span id="childStats">90cm / 12.5kg</span>
            </p>
            <p id="profileNotes" class="profile-notes"></p>
            <div class="rules" id="daycareRules"></div>
          </div>
        </section>

        <section class="panel wardrobe-panel fade-in" id="wardrobePanel">
          <header>
            <h3>계절별 캡슐 옷장</h3>
            <button id="openWardrobeModal" class="primary-btn">
              캡슐 옷 등록
            </button>
          </header>
          <p id="wardrobeSummary" class="wardrobe-summary">
            등록된 옷 정보를 불러오는 중이에요...
          </p>
          <div class="wardrobe-tags" id="wardrobeTags"></div>
        </section>

        <section class="panel conditions-panel fade-in" id="conditionsPanel">
          <h3>오늘의 조건</h3>
          <form id="conditionsForm">
            <div class="form-row readonly">
              <label>현재 위치</label>
              <input type="text" id="locationReadonly" readonly />
            </div>
            <div class="form-row toggles">
              <label>행선지</label>
              <div class="chip-group" data-target="destination">
                <button type="button" data-value="daycare" class="chip active">
                  어린이집
                </button>
                <button type="button" data-value="indoor" class="chip">
                  실내
                </button>
                <button type="button" data-value="outdoor" class="chip">
                  야외놀이
                </button>
              </div>
            </div>
            <div class="form-row toggles">
              <label>활동</label>
              <div class="chip-group" data-target="activity">
                <button type="button" data-value="indoor" class="chip active">
                  실내놀이
                </button>
                <button type="button" data-value="outdoor" class="chip">
                  바깥놀이
                </button>
                <button type="button" data-value="mix" class="chip">
                  혼합
                </button>
              </div>
            </div>
            <div class="form-row toggles">
              <label>오늘 컨디션</label>
              <div class="chip-group" data-target="condition">
                <button type="button" data-value="normal" class="chip active">
                  보통
                </button>
                <button type="button" data-value="sensitive" class="chip">
                  예민
                </button>
                <button type="button" data-value="cold" class="chip">
                  감기
                </button>
              </div>
            </div>
            <div class="form-row">
              <label for="dismissal">하원 시간</label>
              <select id="dismissal">
                <option value="15">15시</option>
                <option value="16">16시</option>
                <option value="17" selected>17시</option>
                <option value="18">18시</option>
              </select>
            </div>
            <button type="submit" class="cta-btn" id="recommendBtn">
              등원룩 추천 받기
            </button>
          </form>
        </section>

        <section class="panel recommendations-panel" id="recommendationsPanel">
          <div class="cards-header">
            <h3>데일리 카드 3장</h3>
            <p class="hint">카드를 좌우로 스와이프해 선택해주세요.</p>
          </div>
          <div class="cards-track" id="dailyCards" aria-live="polite"></div>
        </section>

        <section class="panel feedback-panel" id="feedbackPanel">
          <h3>착용 피드백</h3>
          <p id="selectedCardLabel" class="selected-card-label">
            추천 카드를 선택하면 피드백을 남길 수 있어요.
          </p>
          <div class="feedback-groups">
            <div>
              <p>체감</p>
              <div class="chip-group" data-target="temperature">
                <button type="button" data-value="cold" class="chip">
                  춥다
                </button>
                <button type="button" data-value="ok" class="chip">
                  딱 좋아
                </button>
                <button type="button" data-value="hot" class="chip">
                  덥다
                </button>
              </div>
            </div>
            <div>
              <p>편안함</p>
              <div class="chip-group" data-target="comfort">
                <button type="button" data-value="good" class="chip">
                  편했어요
                </button>
                <button type="button" data-value="bad" class="chip">
                  불편했어요
                </button>
              </div>
            </div>
            <div>
              <p>상태</p>
              <div class="check-group" id="statusChecks">
                <label><input type="checkbox" value="stain" /> 얼룩</label>
                <label><input type="checkbox" value="soil" /> 오염</label>
                <label><input type="checkbox" value="laundry" /> 세탁 필요</label>
              </div>
            </div>
          </div>
          <div class="laundry-row">
            <label class="switch">
              <input type="checkbox" id="laundryToggle" />
              <span class="slider"></span>
            </label>
            <p>세탁 바구니로 보내기</p>
          </div>
          <button id="feedbackSubmit" class="primary-btn wide" disabled>
            피드백 기록하기
          </button>
        </section>

        <section class="panel checklist-panel" id="checklistPanel">
          <h3>등원 가방 체크리스트</h3>
          <ul id="checklistItems" class="checklist"></ul>
        </section>

        <section class="panel ootd-panel" id="ootdPanel">
          <header>
            <div>
              <h3>오늘의 OOTD</h3>
              <p class="sub">
                얼굴은 서버 업로드 없이 기기 로컬에서만 처리된다고 가정합니다.
              </p>
            </div>
            <button id="triggerOotdCapture" class="primary-btn small">
              등록하기
            </button>
          </header>
          <input
            type="file"
            id="ootdInput"
            accept="image/*"
            capture="environment"
            hidden
          />
          <div class="ootd-preview" id="ootdPreview">
            아직 업로드된 사진이 없어요.
          </div>
        </section>
      </main>
    </div>

    <div class="modal" id="wardrobeModal" aria-hidden="true">
      <div class="modal-content">
        <button class="modal-close" data-close="wardrobeModal">×</button>
        <h3>새 옷 등록</h3>
        <form id="wardrobeForm">
          <label>
            옷 이름
            <input type="text" id="itemName" required />
          </label>
          <label>
            카테고리
            <select id="itemCategory" required>
              <option value="top">상의</option>
              <option value="bottom">하의</option>
              <option value="outer">아우터</option>
              <option value="innerwear">실내복</option>
              <option value="socks">양말</option>
            </select>
          </label>
          <div class="season-toggle" id="seasonToggle" role="radiogroup" aria-label="계절 선택">
            <button type="button" class="pill active" data-season="spring">봄</button>
            <button type="button" class="pill" data-season="summer">여름</button>
            <button type="button" class="pill" data-season="fall">가을</button>
            <button type="button" class="pill" data-season="winter">겨울</button>
          </div>
          <label>
            보온 레벨 (1~5)
            <input type="number" id="itemWarmth" min="1" max="5" value="3" />
          </label>
          <label>
            소재
            <input type="text" id="itemMaterial" placeholder="cotton" />
          </label>
          <label>
            대표 색상
            <input type="text" id="itemColors" placeholder="cream, mint" />
          </label>
          <label>
            이미지 업로드
            <input type="file" id="itemImage" accept="image/*" />
          </label>
          <button type="submit" class="primary-btn wide">옷장에 추가</button>
        </form>
      </div>
    </div>

    <div class="modal" id="galleryModal" aria-hidden="true">
      <div class="modal-content gallery-modal">
        <button class="modal-close" data-close="galleryModal">×</button>
        <h3>OOTD 갤러리</h3>
        <div id="galleryGrid" class="gallery-grid"></div>
      </div>
    </div>

    <div class="modal" id="locationModal" aria-hidden="true">
      <div class="modal-content location-modal">
        <button class="modal-close" data-close="locationModal">×</button>
        <h3>위치 검색</h3>
        <div class="location-search-bar">
          <input
            type="text"
            id="locationQuery"
            placeholder="동/지번/건물명을 입력하세요"
          />
          <button id="locationSearchBtn" class="icon-circle" aria-label="위치 검색 실행">
            🔍
          </button>
        </div>
        <ul id="locationResults" class="location-results">
          <li class="empty">검색어를 입력해 주세요.</li>
        </ul>
        <p class="modal-hint">
          * Nominatim (OpenStreetMap) 검색 API를 사용하며, 대한민국 지역 위주로 결과가 표시돼요.
        </p>
      </div>
    </div>

    <script src="app.js" type="module" defer></script>
  </body>
</html>
